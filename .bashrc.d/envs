# vim: ft=bash

# If xdg vars are not set, then enable paths defined in docs.
# https://specifications.freedesktop.org/basedir-spec/latest/#variables
if [ -z $XDG_CACHE_HOME ]; then
  export XDG_CACHE_HOME="${HOME}/.cache"
  if ! [ -d $XDG_CACHE_HOME ]; then
    mkdir $XDG_CACHE_HOME
  fi
fi

if [ -z $XDG_CONFIG_HOME ]; then
  export XDG_CONFIG_HOME="${HOME}/.config"
  if ! [ -d $XDG_CONFIG_HOME ]; then
    mkdir $XDG_CONFIG_HOME
  fi
fi

if [ -z $XDG_DATA_HOME ]; then
  export XDG_DATA_HOME="${HOME}/.local/share"
  if ! [ -d $XDG_DATA_HOME ]; then
    mkdir $XDG_DATA_HOME
  fi
fi

if [ -z $XDG_STATE_HOME ]; then
  export XDG_STATE_HOME="${HOME}/.local/state"
  if ! [ -d $XDG_STATE_HOME ]; then
    mkdir $XDG_STATE_HOME
  fi
fi

# sort the rest
export EDITOR="vim"
export GIT_EDITOR="vim"
export GNUPGHOME="${XDG_CONFIG_HOME}/gnupg"
export GPG_TTY=$(tty)
export HISTCONTROL="ignoreboth"
export HISTFILE="${XDG_STATE_HOME}/bash_history"
export HISTTIMEFORMAT="%y-%m-%d | "
export LANG="en_US.UTF-8"
export LESS="-F -R -g -i -j10 --use-color"
export MANPAGER="less ${LESS} -Dd+r -Du+m"
export MANROFFOPT="-P -c"
export PATH="${PATH}:${HOME}/venv/bin"

if systemctl is-active --user ssh-agent.service > /dev/null; then
  export SSH_AUTH_SOCK="${XDG_RUNTIME_DIR}/ssh-agent.socket"
fi
